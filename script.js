// Enhanced Language translations
const translations = {
    es: {
        heroTitle: "Fluidez al Alcance de tu Mano",
        heroSubtitle: "Domina inglés o español con conversaciones naturales con nuestro chatbot de IA avanzado",
        getAccess: "Comenzar Ahora",
        tryNow: "Probar Ahora",
        features: "Características",
        pricing: "Precios",
        testimonials: "Testimonios",
        toggleLang: "Cambiar a Inglés",
        demoTitle: "Habla con HablaYa!",
        demoSubtitle: "Prueba nuestro chatbot de IA en ambos idiomas",
        englishVersion: "Versión en Inglés",
        englishDesc: "Practica tu inglés con nuestro tutor de IA",
        tryEnglish: "Probar Inglés",
        spanishVersion: "Versión en Español",
        spanishDesc: "Practica tu español con nuestro tutor de IA",
        trySpanish: "Probar Español",
        featuresSubtitle: "POR QUÉ HABLAYA",
        featuresTitle: "Tu Asistente de Idiomas con IA",
        feature1Title: "IA Inteligente",
        feature1Desc: "IA adaptativa que aprende tu nivel y personaliza conversaciones",
        feature2Title: "Diálogos Reales",
        feature2Desc: "Practica conversaciones prácticas que realmente usarás",
        feature3Title: "Siempre Disponible",
        feature3Desc: "Practica cuando te inspire, de día o de noche",
        feature4Title: "Retroalimentación Instantánea",
        feature4Desc: "Correcciones en tiempo real de pronunciación y gramática",
        pricingSubtitle: "PLANES ACCESIBLES",
        pricingTitle: "Precios Sencillos, Máximo Valor",
        annualPlan: "Plan Anual",
        monthlyPlan: "Plan Mensual",
        perYear: "por año",
        perMonth: "por mes",
        save10: "Ahorra 10%",
        priceFeature1: "Conversaciones ilimitadas",
        priceFeature2: "Respuestas de IA avanzada",
        priceFeature3: "Análisis de pronunciación",
        priceFeature4: "Soporte prioritario",
        priceFeature5: "Seguimiento de progreso",
        buyNow: "Obtener",
        moneyBack: "Garantía de devolución de 30 días",
        testimonialsSubtitle: "HISTORIAS DE ÉXITO",
        testimonialsTitle: "¡Los Estudiantes Aman HablaYa!",
        testimonial1: "¡Pasé de básico a conversaciones fluidas en solo 3 meses! La IA se adapta perfectamente a tu nivel.",
        testimonial2: "Finalmente una forma accesible de practicar diariamente. La retroalimentación sobre mi pronunciación cambió todo.",
        testimonial3: "Como profesional ocupado, me encanta poder practicar durante mi commute. ¡La IA recuerda mi progreso!",
        finalCtaTitle: "¿Listo para Transformar tus Habilidades Lingüísticas?",
        finalCtaSubtitle: "Únete a 10,000+ estudiantes que lograron fluidez con HablaYa!",
        quickLinks: "Enlaces Rápidos",
        company: "Empresa",
        aboutUs: "Nosotros",
        privacy: "Privacidad",
        terms: "Términos",
        footerAbout: "Dominio de idiomas con IA por LearnWG",
        copyright: "© 2025 Learn WG. Todos los derechos reservados.",
        aboutTitle: "Sobre LearnWG",
        aboutText: "LearnWG es una compañía de tecnología educativa que crea soluciones innovadoras para el aprendizaje de idiomas potenciadas por inteligencia artificial.",
        privacyTitle: "Política de Privacidad",
        privacyText: "Respetamos tu privacidad. Tus datos se cifran y usan solo para mejorar tu experiencia. Nunca vendemos o compartimos tu información sin consentimiento explícito.",
        termsTitle: "Términos de Servicio",
        termsText: "Al acceder a HablaYa!, aceptas nuestros términos. Las suscripciones se renuevan automáticamente pero pueden cancelarse cuando quieras. Ofrecemos garantía de devolución de 30 días si no estás satisfecho.",
        locationMexico: "Ciudad de México",
        locationGuadalajara: "Guadalajara",
        locationMonterrey: "Monterrey",
        popularChoice: "Más Popular",
        liveChat: "Chat en Vivo"
    },
    en: {
        heroTitle: "Fluency at Your Fingertips",
        heroSubtitle: "Master English or Spanish through natural conversations with our advanced AI chatbot",
        getAccess: "Get Started",
        tryNow: "Try Now",
        features: "Features",
        pricing: "Pricing",
        testimonials: "Testimonials",
        toggleLang: "Switch to Spanish",
        demoTitle: "Speak with HablaYa!",
        demoSubtitle: "Try our AI chatbot in both languages",
        englishVersion: "English Version",
        englishDesc: "Practice your English with our AI tutor",
        tryEnglish: "Try English Version",
        spanishVersion: "Spanish Version",
        spanishDesc: "Practice your Spanish with our AI tutor",
        trySpanish: "Try Spanish Version",
        featuresSubtitle: "WHY HABLAYA",
        featuresTitle: "Your Personal AI Language Partner",
        feature1Title: "Smart AI Tutor",
        feature1Desc: "Adaptive AI that learns your level and personalizes conversations",
        feature2Title: "Real Dialogues",
        feature2Desc: "Practice practical conversations you'll actually use",
        feature3Title: "Always Available",
        feature3Desc: "Practice whenever inspiration strikes, day or night",
        feature4Title: "Instant Feedback",
        feature4Desc: "Real-time corrections on pronunciation and grammar",
        pricingSubtitle: "AFFORDABLE PLANS",
        pricingTitle: "Simple Pricing, Maximum Value",
        annualPlan: "Annual Plan",
        monthlyPlan: "Monthly Plan",
        perYear: "per year",
        perMonth: "per month",
        save10: "Save 10%",
        priceFeature1: "Unlimited conversations",
        priceFeature2: "Advanced AI responses",
        priceFeature3: "Pronunciation analysis",
        priceFeature4: "Priority support",
        priceFeature5: "Progress tracking",
        buyNow: "Get",
        moneyBack: "30-day money back guarantee",
        testimonialsSubtitle: "SUCCESS STORIES",
        testimonialsTitle: "Students Love HablaYa!",
        testimonial1: "I went from basic to fluent conversations in just 3 months! The AI adapts perfectly to your level.",
        testimonial2: "Finally an affordable way to practice daily. The feedback on my pronunciation was a game-changer.",
        testimonial3: "As a busy professional, I love being able to practice during my commute. The AI remembers my progress!",
        finalCtaTitle: "Ready to Transform Your Language Skills?",
        finalCtaSubtitle: "Join 10,000+ students who achieved fluency with HablaYa!",
        quickLinks: "Quick Links",
        company: "Company",
        aboutUs: "About Us",
        privacy: "Privacy",
        terms: "Terms",
        footerAbout: "AI-powered language mastery by LearnWG",
        copyright: "© 2025 Learn WG. All rights reserved.",
        aboutTitle: "About LearnWG",
        aboutText: "LearnWG is an innovative edtech company creating AI-powered language learning solutions that make mastering new languages accessible, effective, and enjoyable for everyone.",
        privacyTitle: "Privacy Policy",
        privacyText: "We prioritize your privacy. Your data is encrypted and used solely to enhance your learning experience. We never sell or share your information with third parties without explicit consent.",
        termsTitle: "Terms of Service",
        termsText: "By accessing HablaYa!, you agree to our terms. Subscriptions auto-renew but can be canceled anytime. We offer a 30-day money-back guarantee if you're not satisfied.",
        locationMexico: "Mexico City",
        locationGuadalajara: "Guadalajara",
        locationMonterrey: "Monterrey",
        popularChoice: "Most Popular",
        liveChat: "Live Conversation"
    }
};

// Initialize the app
document.addEventListener('DOMContentLoaded', function() {
    // Set initial language
    const currentLang = document.documentElement.getAttribute('data-lang') || 'es';
    updateLanguage(currentLang);
    
    // Theme toggle
    const themeToggle = document.getElementById('theme-toggle');
    themeToggle.addEventListener('click', toggleTheme);
    
    // Language toggle
    const langToggle = document.getElementById('lang-toggle');
    const mobileLangToggle = document.getElementById('mobile-lang-toggle');
    langToggle.addEventListener('click', toggleLanguage);
    mobileLangToggle.addEventListener('click', toggleLanguage);
    
    // Mobile menu
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const closeMenuBtn = document.getElementById('close-menu');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuBtn.addEventListener('click', function() {
        mobileMenu.classList.add('active');
        mobileMenuBtn.setAttribute('aria-expanded', 'true');
        document.body.style.overflow = 'hidden';
    });
    
    closeMenuBtn.addEventListener('click', function() {
        mobileMenu.classList.remove('active');
        mobileMenuBtn.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
    });
    
    // Pricing tabs
    const pricingTabs = document.querySelectorAll('.pricing-tab, .currency-btn');
    pricingTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const currency = this.dataset.currency;
            document.querySelectorAll('.pricing-tab, .currency-btn').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            document.querySelectorAll('.pricing-card').forEach(card => {
                card.classList.remove('active');
            });
            
            document.querySelectorAll(`.pricing-card.${currency}`).forEach(card => {
                card.classList.add('active');
            });
        });
    });
    
    // Modal functionality
    const modalTriggers = document.querySelectorAll('.modal-trigger');
    const closeButtons = document.querySelectorAll('.close-modal');
    
    modalTriggers.forEach(trigger => {
        trigger.addEventListener('click', function(e) {
            e.preventDefault();
            const modalId = this.getAttribute('data-modal');
            document.getElementById(modalId).style.display = 'flex';
            document.body.style.overflow = 'hidden';
        });
    });
    
    closeButtons.forEach(button => {
        button.addEventListener('click', function() {
            this.closest('.modal').style.display = 'none';
            document.body.style.overflow = '';
        });
    });
    
    window.addEventListener('click', function(e) {
        if (e.target.classList.contains('modal')) {
            e.target.style.display = 'none';
            document.body.style.overflow = '';
        }
    });
    
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            if (this.classList.contains('modal-trigger')) return;
            
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth'
                });
                
                // Close mobile menu if open
                mobileMenu.classList.remove('active');
                mobileMenuBtn.setAttribute('aria-expanded', 'false');
                document.body.style.overflow = '';
            }
        });
    });
    
    // Update flag based on language
    updateLanguageFlags();
});

function toggleTheme() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', newTheme);
    
    const themeIcon = document.querySelector('.theme-icon');
    themeIcon.textContent = newTheme === 'dark' ? '☀️' : '🌙';
    
    localStorage.setItem('hablaya-theme', newTheme);
}

function toggleLanguage() {
    const currentLang = document.documentElement.getAttribute('data-lang');
    const newLang = currentLang === 'es' ? 'en' : 'es';
    document.documentElement.setAttribute('data-lang', newLang);
    updateLanguage(newLang);
    updateLanguageFlags();
    
    localStorage.setItem('hablaya-lang', newLang);
}

function updateLanguage(lang) {
    document.querySelectorAll('[data-i18n]').forEach(element => {
        translateElement(element, lang);
    });
}

function translateElement(element, lang) {
    const key = element.getAttribute('data-i18n');
    if (translations[lang] && translations[lang][key]) {
        if (element.tagName === 'INPUT' && element.type === 'submit') {
            element.value = translations[lang][key];
        } else {
            element.textContent = translations[lang][key];
        }
    }
}

function updateLanguageFlags() {
    const currentLang = document.documentElement.getAttribute('data-lang');
    const flags = document.querySelectorAll('.lang-flag');
    const langTexts = document.querySelectorAll('.lang-text');
    
    if (currentLang === 'es') {
        flags.forEach(flag => flag.textContent = '🇲🇽');
        langTexts.forEach(text => {
            if (text.classList.contains('lang-text')) {
                text.textContent = 'ES';
            }
        });
    } else {
        flags.forEach(flag => flag.textContent = '🇺🇸');
        langTexts.forEach(text => {
            if (text.classList.contains('lang-text')) {
                text.textContent = 'EN';
            }
        });
    }
}

// Check for saved theme preference
const savedTheme = localStorage.getItem('hablaya-theme');
if (savedTheme) {
    document.documentElement.setAttribute('data-theme', savedTheme);
    const themeIcon = document.querySelector('.theme-icon');
    themeIcon.textContent = savedTheme === 'dark' ? '☀️' : '🌙';
}

// Check for saved language preference
const savedLang = localStorage.getItem('hablaya-lang');
if (savedLang) {
    document.documentElement.setAttribute('data-lang', savedLang);
    updateLanguage(savedLang);
    updateLanguageFlags();
}